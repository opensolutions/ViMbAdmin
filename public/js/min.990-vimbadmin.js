$("document").ready(function(){$("a[id|='modal-dialog']").bind("click",tt_openModalDialog)});function tt_throbber(size,lines,strokewidth,fallback){if(!fallback)fallback="images/throbber_32px.gif";return new Throbber({"color":"black","size":size,"fade":750,"fallback":fallback,"rotationspeed":0,"lines":lines,"strokewidth":strokewidth,"alpha":1})}
function ossToggle(e,Url,data,delElement){e.unbind();if(e.hasClass("disabled"))return;var on=true;if(e.hasClass("btn-danger"))e.removeClass("btn-danger").attr("disabled","disabled");else{on=false;e.removeClass("btn-success").attr("disabled","disabled")}var Throb=tt_throbber(18,10,1,"images/throbber_16px.gif").appendTo($("#throb-"+e.attr("id")).get(0)).start();var ok=false;$.ajax({url:Url,data:data,async:true,cache:false,type:"POST",timeout:1E4,success:function(data){if(data=="ok")ok=true;else ossAddMessage(data,
"error")},error:ossAjaxErrorHandler,complete:function(){if(!ok)on=!on;if(on)e.html("Yes").addClass("btn-success").removeAttr("disabled");else e.html("No").addClass("btn-danger").removeAttr("disabled");$("#throb-"+e.attr("id")).html("");e.click(function(event){ossToggle(e,Url,data)});if(typeof delElement!=undefined)$(delElement).hide("slow",function(){$(delElement).remove()})}})}
function tt_openModalDialog(event){event.preventDefault();id=$(event.target).attr("id").substr($(event.target).attr("id").lastIndexOf("-")+1);if(id.substring(0,4)=="wide")$("#modal_dialog").addClass("modal-wide");else $("#modal_dialog").removeClass("modal-wide");$("#modal_dialog").html('<div id="throb" style="padding-left:230px; padding-top:175px; height:275px;"></div>');var Throb=tt_throbber(100,20,1.8).appendTo($("#throb").get(0)).start();dialog=$("#modal_dialog").modal({backdrop:true,keyboard:true,
show:true});$.ajax({url:$(event.target).attr("href"),async:true,cache:false,type:"POST",timeout:1E4,success:function(data){$("#modal_dialog").html(data);$(".modal-body").scrollTop(0);$("#modal_dialog_cancel").bind("click",function(){dialog.modal("hide")})},error:ossAjaxErrorHandler})}
function ossAjaxErrorHandler(XMLHttpRequest,textStatus,errorThrown){if($("#modal_dialog:visible").length)if($("#modal_dialog_save").length){$("#modal_dialog_save").removeAttr("disabled").removeClass("disabled");$("#modal_dialog_cancel").removeAttr("disabled").removeClass("disabled")}else if(dialog)dialog.modal("hide");if($("canvas").length)$("canvas").remove();ossAddMessage("An unexpected error occured.","error",true)}
function ossAddMessage(msg,type,handled){rand=Math.floor(Math.random()*1E6);msgbox='<div id="oss-message-'+rand+'" class="alert alert-'+type+' fade in">                                <a class="close" href="#" data-dismiss="alert">\u00d7</a>                                    '+msg+"</div>";if($(".modal-body:visible").length&&handled)$(".modal-body").prepend(msgbox);else if($(".page-header").length)$(".page-header").after(msgbox);else if($(".page-content").length)$(".page-header").after(msgbox);else if($(".container").length)$(".container").before(msgbox);
else if($("#main").length)$("#main").prepend(msgbox);$("#oss-message-"+rand).alert()}
function ossJscriptFieldValidator(fieldName,email){if($("#"+fieldName).val()==""){$("#div-form-"+fieldName).addClass("error");$("#help-"+fieldName).html("Value is required and can't be empty.");$("#help-"+fieldName).show()}else if(email)if(ossValidateEmail($("#"+fieldName).val())){$("#div-form-"+fieldName).removeClass("error");$("#help-"+fieldName).hide()}else{$("#div-form-"+fieldName).addClass("error");$("#help-"+fieldName).html("<br/>This is not a valid email address.");$("#help-"+fieldName).show()}else{$("#div-form-"+
fieldName).removeClass("error");$("#help-"+fieldName).hide()}}function ossValidateEmail(email){var emailReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(emailReg.test(email))return true;else return false}$.extend($.fn.dataTableExt.oStdClasses,{"sWrapper":"dataTables_wrapper form-inline"});
$.fn.dataTableExt.oApi.fnPagingInfo=function(oSettings){return{"iStart":oSettings._iDisplayStart,"iEnd":oSettings.fnDisplayEnd(),"iLength":oSettings._iDisplayLength,"iTotal":oSettings.fnRecordsTotal(),"iFilteredTotal":oSettings.fnRecordsDisplay(),"iPage":Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength),"iTotalPages":Math.ceil(oSettings.fnRecordsDisplay()/oSettings._iDisplayLength)}};
$.extend($.fn.dataTableExt.oPagination,{"bootstrap":{"fnInit":function(oSettings,nPaging,fnDraw){var oLang=oSettings.oLanguage.oPaginate;var fnClickHandler=function(e){e.preventDefault();if(oSettings.oApi._fnPageChange(oSettings,e.data.action))fnDraw(oSettings)};$(nPaging).addClass("pagination").append("<ul>"+'<li class="prev disabled"><a href="#">&larr; '+oLang.sPrevious+"</a></li>"+'<li class="next disabled"><a href="#">'+oLang.sNext+" &rarr; </a></li>"+"</ul>");var els=$("a",nPaging);$(els[0]).bind("click.DT",
{action:"previous"},fnClickHandler);$(els[1]).bind("click.DT",{action:"next"},fnClickHandler)},"fnUpdate":function(oSettings,fnDraw){var iListLength=5;var oPaging=oSettings.oInstance.fnPagingInfo();var an=oSettings.aanFeatures.p;var i,j,sClass,iStart,iEnd,iHalf=Math.floor(iListLength/2);if(oPaging.iTotalPages<iListLength){iStart=1;iEnd=oPaging.iTotalPages}else if(oPaging.iPage<=iHalf){iStart=1;iEnd=iListLength}else if(oPaging.iPage>=oPaging.iTotalPages-iHalf){iStart=oPaging.iTotalPages-iListLength+
1;iEnd=oPaging.iTotalPages}else{iStart=oPaging.iPage-iHalf+1;iEnd=iStart+iListLength-1}for(i=0,iLen=an.length;i<iLen;i++){$("li:gt(0)",an[i]).filter(":not(:last)").remove();for(j=iStart;j<=iEnd;j++){sClass=j==oPaging.iPage+1?'class="active"':"";$("<li "+sClass+'><a href="#">'+j+"</a></li>").insertBefore($("li:last",an[i])[0]).bind("click",function(e){e.preventDefault();oSettings._iDisplayStart=(parseInt($("a",this).text(),10)-1)*oPaging.iLength;fnDraw(oSettings)})}if(oPaging.iPage===0)$("li:first",
an[i]).addClass("disabled");else $("li:first",an[i]).removeClass("disabled");if(oPaging.iPage===oPaging.iTotalPages-1||oPaging.iTotalPages===0)$("li:last",an[i]).addClass("disabled");else $("li:last",an[i]).removeClass("disabled")}}}});
